<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù…Ù†ØµØ© Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø·Ù…Ø§Ø·Ù…</title>

<style>
body {
    margin: 0;
    font-family: "Tahoma", Arial, sans-serif;
    background: #eef2f5;
    color: #333;
    direction: rtl;
}

header {
    background: linear-gradient(135deg, #28a745, #00c851);
    color: white;
    padding: 60px 40px;
    text-align: center;
}

header h1 {
    font-size: 44px;
    margin: 0;
}

header p {
    font-size: 18px;
    margin-top: 15px;
}

.container {
    width: 1150px;
    margin: 40px auto;
}

.section {
    background: white;
    padding: 35px;
    border-radius: 12px;
    margin-bottom: 35px;
}

.section h2 {
    margin-top: 0;
    color: #28a745;
}

input, button {
    width: 100%;
    padding: 14px;
    margin-top: 12px;
    font-size: 16px;
}

button {
    background: #28a745;
    color: white;
    border: none;
    cursor: pointer;
}

button:hover {
    background: #1e7e34;
}

.result {
    margin-top: 18px;
    font-weight: bold;
    font-size: 17px;
}

.images {
    display: flex;
    gap: 20px;
    margin-top: 25px;
}

.images img {
    width: 50%;
    border-radius: 10px;
    border: 1px solid #ccc;
    min-height: 300px;
    object-fit: contain;
    background: #fafafa;
}

footer {
    background: #222;
    color: #aaa;
    padding: 25px;
    text-align: center;
    font-size: 14px;
}
</style>
</head>

<body>

<header>
    <h1>Ù…Ù†ØµØ© Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø·Ù…Ø§Ø·Ù… ğŸ…</h1>
    <p>ÙƒØ´Ù Ø£Ù…Ø±Ø§Ø¶ Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø·Ù…Ø§Ø·Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… YOLO Detection</p>
</header>

<div class="container">

<div class="section">
<h2>Ù„ÙˆØ­Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©</h2>

<input type="file" id="file">
<button onclick="run()">ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>

<div class="result" id="res"></div>

<div class="images">
<img id="in" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©">
<img id="out" alt="Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙƒØ´Ù">
</div>

</div>

</div>

<footer>
Smart Agriculture AI Project â€“ Tomato Disease Detection
</footer>

<script>
async function run() {

    const fileInput = document.getElementById("file");
    const res = document.getElementById("res");
    const inImg = document.getElementById("in");
    const outImg = document.getElementById("out");

    if (!fileInput.files.length) {
        alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }

    const file = fileInput.files[0];

    inImg.src = URL.createObjectURL(file);
    res.innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©...";

    const formData = new FormData();
    formData.append("file", file);

    try {
        const response = await fetch("/detect-image", {
            method: "POST",
            body: formData
        });

        const data = await response.json();

        res.innerHTML =
            "Ø§Ù„Ù…Ø±Ø¶: <b>" + data.label +
            "</b><br>Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø©: <b>" + data.confidence +
            "%</b><br>Ø¹Ø¯Ø¯ Ø§Ù„Ø§ÙƒØªØ´Ø§ÙØ§Øª: <b>" + data.num_detections + "</b>";

        outImg.src = "/outputs/" + data.result_image + "?t=" + new Date().getTime();

    } catch (error) {
        res.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„";
        console.error(error);
    }
}
</script>

</body>
</html>